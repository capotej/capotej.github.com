
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>@capotej</title>
	<meta name="author" content="Julio Capote">

	
	<meta name="description" content="Whenever I released a new version of Finatra, I always had update a few things so everything was on the latest version and code: 1) The version in &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="@capotej" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">@capotej</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/projects">Projects</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Home</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/projects">Projects</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:capotej.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/capotej" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/capotej" title="GitHub">GitHub</a>
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		

    <a class="pinboard" href="https://pinboard.com/u:capotej" title="Pinboard">Pinboard</a>

	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:capotej.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h1 class="title"><a href="/blog/2012/11/13/making-code-generators-from-your-app/">Making Code Generators From Your App</a></h1>
	<div class="entry-content">
		<p>Whenever I released a new version of <a href="https://github.com/capotej/finatra#readme">Finatra</a>, I always had update a few things so everything was on the latest version and code:</p>

<p>1) The version in the xml fragment of the main README.markdown has to change</p>

<p>2) The version in the pom.xml of the example app has to change</p>

<p>3) Any api changes, if any, have to be updated in the example app</p>

<p>4) The version in the template pom.xml of the app generator has to change</p>

<p>5) Any api changes, if any, have to be updated inside the app template</p>

<p>After messing this up a few times, I created a <a href="https://github.com/37signals/sub#readme">sub</a> script that generates the example app, the README, <em>and</em> the app generator, straight from unit test! Here&#8217;s how I did it:</p>

<h2>The source of truth</h2>

<p>A common problem with code generators is the source code they generate quickly becomes out of date, because the templates aren&#8217;t updated as often as the api changes in the framework. To avoid this, I made a special unit test that I&#8217;d use as the &#8220;seed&#8221; for my generator. A short example:</p>

<figure class='code'><figcaption><span>ExampleAppSpec.scala</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">ExampleSpec</span> <span class="k">extends</span> <span class="nc">SpecHelper</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* ###BEGIN_APP### */</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">ExampleApp</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     * Basic Example</span>
</span><span class='line'><span class="cm">     *</span>
</span><span class='line'><span class="cm">     * curl http://localhost:7070/hello =&gt; &quot;hello world&quot;</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="n">request</span> <span class="k">=&gt;</span>
</span><span class='line'>      <span class="n">render</span><span class="o">.</span><span class="n">plain</span><span class="o">(</span><span class="s">&quot;hello world&quot;</span><span class="o">).</span><span class="n">toFuture</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">val</span> <span class="n">app</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ExampleApp</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* ###END_APP### */</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* ###BEGIN_SPEC### */</span>
</span><span class='line'>
</span><span class='line'>  <span class="s">&quot;GET /hello&quot;</span> <span class="n">should</span> <span class="s">&quot;respond with hello world&quot;</span> <span class="n">in</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">get</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="n">response</span><span class="o">.</span><span class="n">body</span> <span class="n">should</span> <span class="n">equal</span> <span class="o">(</span><span class="s">&quot;hello world&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* ###END_SPEC### */</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using the special comments, I can extract a sample app a test suite from the source code.</p>

<h2>The app generator</h2>

<p>Now that we have our &#8220;template&#8221;, we can build our app generator to use it. I customized <a href="http://capotej.com/blog/2012/11/01/base-a-scala-project-generator/">base</a> and ended up with: <a href="https://github.com/capotej/finatra/blob/master/script/finatra/libexec/finatra-new">script/finatra/libexec/finatra-new</a></p>

<p>You can then run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>./finatra new com.example.myapp
</span></code></pre></td></tr></table></div></figure>


<p>and it will generate <code>myapp/</code> based on the tested example code from the test suite above!</p>

<h2>The example app</h2>

<p>This command uses the generator to generates/update <a href="https://github.com/capotej/finatra-example">finatra-example</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c"># Usage: finatra update-example</span>
</span><span class='line'><span class="c"># Summary: generates the example app from the template</span>
</span><span class='line'>
</span><span class='line'><span class="nb">set</span> -e
</span><span class='line'>
</span><span class='line'><span class="nb">source</span> <span class="nv">$_FINATRA_ROOT</span>/lib/base.sh
</span><span class='line'>
</span><span class='line'><span class="nv">tmpdir</span><span class="o">=</span><span class="k">$(</span>mktemp -d /tmp/finatra_example.XXX<span class="k">)</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$_FINATRA_ROOT</span>/bin/finatra new com.twitter.finatra_example <span class="nv">$tmpdir</span>
</span><span class='line'>
</span><span class='line'>cp -Rv <span class="nv">$tmpdir</span>/finatra_example/ <span class="nv">$EXAMPLE_REPO</span>
</span><span class='line'>
</span><span class='line'>rm -rf <span class="nv">$tmpdir</span>
</span><span class='line'>
</span><span class='line'><span class="nb">cd</span> <span class="nv">$EXAMPLE_REPO</span> <span class="o">&amp;&amp;</span> mvn <span class="nb">test</span>
</span></code></pre></td></tr></table></div></figure>


<p>This also has the neat side effect of testing the app generator and the generated app.</p>

<h2>Updating the README&#8217;s</h2>

<p>I also have a <a href="https://github.com/capotej/finatra/blob/master/script/finatra/libexec/finatra-update-readme">command</a> for updating the README with fresh examples and version numbers.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-13T21:31:00-08:00" pubdate data-updated="true">Nov 13<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/finatra/'>finatra</a>, <a class='category' href='/blog/categories/shell-scripting/'>shell scripting</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/11/07/announcing-finatra-1-0-0/">Announcing Finatra 1.0.0</a></h1>
	<div class="entry-content">
		<p>After months of work <a href="https://github.com/capotej/finatra#readme">Finatra</a> 1.0.0 is finally available! Finatra is a scala web framework inspired by <a href="https://github.com/sinatra/sinatra#readme">Sinatra</a> built on top of <a href="http://twitter.github.com/finagle">Finagle</a>.</p>

<h3>The API</h3>

<p>The API looks like what you&#8217;d expect, here&#8217;s a simple endpoint that uses route parameters:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">get</span><span class="o">(</span><span class="s">&quot;/user/:username&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="n">request</span> <span class="k">=&gt;</span>
</span><span class='line'>  <span class="k">val</span> <span class="n">username</span> <span class="k">=</span> <span class="n">request</span><span class="o">.</span><span class="n">routeParams</span><span class="o">.</span><span class="n">getOrElse</span><span class="o">(</span><span class="s">&quot;username&quot;</span><span class="o">,</span> <span class="s">&quot;default_user&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="n">render</span><span class="o">.</span><span class="n">plain</span><span class="o">(</span><span class="s">&quot;hello &quot;</span> <span class="o">+</span> <span class="n">username</span><span class="o">).</span><span class="n">toFuture</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>toFuture</code> call means that the response is actually a <a href="http://twitter.github.com/scala_school/finagle.html#Future">Future</a>, a powerful concurrency abstraction worth checking out.</p>

<p>Testing it is just as easy:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="s">&quot;GET /user/foo&quot;</span> <span class="n">should</span> <span class="s">&quot;responsd with hello foo&quot;</span> <span class="n">in</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">get</span><span class="o">(</span><span class="s">&quot;/user/foo&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="n">response</span><span class="o">.</span><span class="n">body</span> <span class="n">should</span> <span class="n">equal</span> <span class="o">(</span><span class="s">&quot;hello foo&quot;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>A super quick demo</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git clone https://github.com/capotej/finatra.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>finatra
</span><span class='line'><span class="nv">$ </span>./finatra new com.example.myapp /tmp
</span></code></pre></td></tr></table></div></figure>


<p>Now you have an <code>/tmp/myapp</code> you can use:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /tmp/myapp
</span><span class='line'><span class="nv">$ </span>mvn scala:run
</span></code></pre></td></tr></table></div></figure>


<p>A simple app should&#8217;ve started up locally on port 7070, verify with:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl http://locahost:7070
</span><span class='line'>hello world
</span></code></pre></td></tr></table></div></figure>


<p>You can see the rest of the endpoints at <code>/tmp/myapp/src/main/scala/com/example/myapp/App.scala</code></p>

<h3>Heroku integration</h3>

<p>The generated apps work in heroku out of the box:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>heroku create
</span><span class='line'><span class="nv">$ </span>git init
</span><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git commit -am <span class="s1">&#39;stuff&#39;</span>
</span><span class='line'><span class="nv">$ </span>git push heroku master
</span></code></pre></td></tr></table></div></figure>


<p>Make sure to see the full details in the <a href="https://github.com/capotej/finatra#readme">README</a> and check out the <a href="https://github.com/capotej/finatra-example">example app</a>.</p>

<p>Props to <a href="http://twitter.com/twoism">@twoism</a> and <a href="http://twitter.com/thisisfranklin">@thisisfranklin</a> for their code, feedback and moral support.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-07T21:20:00-08:00" pubdate data-updated="true">Nov 7<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/finatra/'>finatra</a>, <a class='category' href='/blog/categories/scala/'>scala</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/11/01/base-a-scala-project-generator/">Base: A Scala Project Generator</a></h1>
	<div class="entry-content">
		<p>Finally got tired of copy pasting other projects and gutting them to make new ones, so I created <a href="http://github.com/capotej/base">base</a>, a shell command that creates new scala projects.</p>

<p>Creating the project:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>base new com.capotej.newproj
</span><span class='line'>creating project: newproj
</span><span class='line'>  creating App.scala
</span><span class='line'>  creating AppSpec.scala
</span><span class='line'>  creating pom.xml
</span><span class='line'>  creating .gitignore
</span><span class='line'>  creating .travis.yml
</span><span class='line'>  creating LICENSE
</span><span class='line'>  creating README.markdown
</span><span class='line'>Done! run mvn scala:run to run your projec
</span></code></pre></td></tr></table></div></figure>


<p>Based on the package name, it infered that the project name is <code>newproj</code> and created the project under that folder. Let&#8217;s build and run it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>newproj
</span><span class='line'><span class="nv">$ </span>mvn compile scala:run
</span><span class='line'><span class="o">(</span>... maven output ...<span class="o">)</span>
</span><span class='line'>hello world
</span></code></pre></td></tr></table></div></figure>


<p>This uses the new incremental compiler for maven, <a href="http://github.com/typesafehub/zinc">zinc</a>, which dramatically speeds up compile times (except for the first time you run it). It also sets you up with the latest scalatest maven plugin, which gives you sweet looking test output, like so:</p>

<p><img src="http://i.imgur.com/qyyem.png" alt="" /></p>

<p>See the base <a href="http://github.com/capotej/base#readme">README</a> for installation instructions.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-01T14:39:00-07:00" pubdate data-updated="true">Nov 1<span>st</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/efficiency/'>efficiency</a>, <a class='category' href='/blog/categories/scala/'>scala</a>, <a class='category' href='/blog/categories/shell-scripting/'>shell scripting</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/10/11/riak-at-posterous/">Riak at Posterous</a></h1>
	<div class="entry-content">
		<p>A few months ago, I gave a presentation on how Posterous uses Riak for it&#8217;s post cache; At <a href="http://basho.com/community/ricon2012/">#ricon2012</a>
I ended up retelling this story to numerous people, so I thought I&#8217;d post the slides and video here.</p>

<iframe src="http://player.vimeo.com/video/35905739?title=0&amp;byline=0&amp;portrait=0&amp;color=000000" width="512" height="421" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>




<iframe src="http://www.slideshare.net/slideshow/embed_code/11160556?rel=0" width="512" height="421" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen> </iframe>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-10-11T13:47:00-07:00" pubdate data-updated="true">Oct 11<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/posterous/'>posterous</a>, <a class='category' href='/blog/categories/presentation/'>presentation</a>, <a class='category' href='/blog/categories/riak/'>riak</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/2012/10/07/an-embedded-key-value-store-for-shell-scripts/">An Embedded Key / Value Store for Shell Scripts</a></h1>
	<div class="entry-content">
		<p>UPDATE: this is now available as a <a href="http://github.com/37signals/sub">sub</a> command, here: <a href="http://github.com/capotej/kiev">kiev</a></p>

<p>Cooked this up last night when I needed a simple key/value store for use in a shell script:</p>

<figure class='code'><figcaption><span>db.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'>
</span><span class='line'><span class="nv">DBFILE</span><span class="o">=</span>example.db
</span><span class='line'>
</span><span class='line'>put<span class="o">(){</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;export kv_$1=$2&quot;</span> &gt;&gt; <span class="nv">$DBFILE</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>del<span class="o">(){</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;unset kv_$1&quot;</span> &gt;&gt; <span class="nv">$DBFILE</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>get<span class="o">(){</span>
</span><span class='line'>  <span class="nb">source</span> <span class="nv">$DBFILE</span>
</span><span class='line'>  <span class="nb">eval </span><span class="nv">r</span><span class="o">=</span><span class="se">\$</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;kv_$1&quot;</span><span class="k">)</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="nv">$r</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>list<span class="o">(){</span>
</span><span class='line'>  <span class="nb">source</span> <span class="nv">$DBFILE</span>
</span><span class='line'>  <span class="k">for </span>i in <span class="k">$(</span>env | grep <span class="s2">&quot;kv_&quot;</span> | cut -d<span class="o">=</span> -f1 <span class="k">)</span>; <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="nb">eval </span><span class="nv">r</span><span class="o">=</span><span class="se">\$</span><span class="nv">$i</span>; <span class="nb">echo</span> <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$i</span> | sed -e <span class="s1">&#39;s/kv_//&#39;</span><span class="k">)</span> <span class="nv">$r</span>;
</span><span class='line'>  <span class="k">done</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## cmd dispatch</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="k">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">0</span><span class="k">}</span> <span class="o">==</span> <span class="s2">&quot;set&quot;</span> <span class="o">]</span>; <span class="k">then</span>
</span><span class='line'><span class="k">  </span>put <span class="nv">$2</span> <span class="nv">$3</span>
</span><span class='line'><span class="k">elif</span> <span class="o">[</span> <span class="k">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">0</span><span class="k">}</span> <span class="o">==</span> <span class="s2">&quot;get&quot;</span> <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'><span class="k">  </span>get <span class="nv">$2</span>
</span><span class='line'><span class="k">elif</span> <span class="o">[</span> <span class="k">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">0</span><span class="k">}</span> <span class="o">==</span> <span class="s2">&quot;list&quot;</span> <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'><span class="k">  </span>list
</span><span class='line'><span class="k">elif</span> <span class="o">[</span> <span class="k">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">0</span><span class="k">}</span> <span class="o">==</span> <span class="s2">&quot;del&quot;</span> <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'><span class="k">  </span>del <span class="nv">$2</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;unknown cmd&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>Use it like so:</p>

<p><code>$ ./db.sh set foo bar</code></p>

<p><code>$ ./db.sh get foo</code></p>

<p><code>$ ./db.sh set foo baz</code></p>

<p><code>$ ./db.sh get foo</code></p>

<p><code>$ ./db.sh del foo</code></p>

<p><code>$ ./db.sh list</code></p>

<h2>How it works</h2>

<p>Every time you update/set/delete a value, it writes a shell expression to an append-only log,
exporting a shell variable (key) with that value. By sourcing the file every time we read a value, we
replay the log, bringing our environment to a consistent state. Then, reading the value is just looking
up that dynamic variable (key) in our shell environment.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-10-07T10:06:00-07:00" pubdate data-updated="true">Oct 7<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/databases/'>databases</a>, <a class='category' href='/blog/categories/shell-scripting/'>shell scripting</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/finagle-with-scala-bootstrapper">Finagle With Scala-bootstrapper</a></h1>
	<div class="entry-content">
		<p>I&#8217;ve been fascinated by the concepts in <a href="http://twitter.github.com/finagle/">finagle</a> for some time, but being a scala noob, I never knew how to bootstrap a finagle project. Turns out twitter has a gem, <a href="https://github.com/twitter/scala-bootstrapper">scala-bootstrapper</a>, that generates a simple thirft based key/value store for you. There&#8217;s even a<a href="http://twitter.github.com/scala_school/searchbird.html">tutorial</a>  on how to extend the example project into a distributed search service.</p>

<p>This is a guide on setting it all up locally, it assumes you have Git, Homebrew, and OS X.</p>

<h3>Install scala 2.8.1</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>brew versions scala
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span>/usr/local/<span class="o">(</span>or wherever you have homebrew installed<span class="o">)</span>
</span><span class='line'><span class="nv">$ </span>git checkout -b scala281 0e16b9d<span class="o">(</span>make sure the SHA matches versions output<span class="o">)</span>
</span><span class='line'><span class="nv">$ </span>brew install scala
</span><span class='line'><span class="nv">$ </span>git checkout master<span class="nv">$git</span> branch -D scala281
</span></code></pre></td></tr></table></div></figure>


<h3>Install sbt 0.7.4 (assumes you have a ~/bin in your $PATH)</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl -O http://simple-build-tool.googlecode.com/files/sbt-launch-0.7.4.jar &gt; ~/bin/sbt-launch.jar
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;java -Xmx1G -jar `dirname $0`/sbt-launch.jar &quot;$@&quot;&#39;</span>&gt; ~/bin/sbt
</span></code></pre></td></tr></table></div></figure>


<h3>Install scala-bootstrapper</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>gem install scala-bootstrapper
</span></code></pre></td></tr></table></div></figure>


<h3>Generate finagle project**</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>mkdir newbird
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>newbird
</span><span class='line'><span class="nv">$ </span>scala-bootstrapper newbird
</span><span class='line'><span class="nv">$ </span>sbt update
</span><span class='line'><span class="nv">$ </span>sbt <span class="nb">test</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Add a Client class</h3>

<p>create newbird/src/main/scala/com/twitter/newbird/Client.scala with</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">package</span> <span class="nn">com.twitter.newbird</span>
</span><span class='line'>
</span><span class='line'><span class="k">import</span> <span class="nn">com.twitter.finagle.builder.ClientBuilder</span>
</span><span class='line'><span class="k">import</span> <span class="nn">com.twitter.finagle.thrift.ThriftClientFramedCodec</span>
</span><span class='line'><span class="k">import</span> <span class="nn">com.twitter.newbird.thrift._</span>
</span><span class='line'><span class="k">import</span> <span class="nn">org.apache.thrift.protocol.TBinaryProtocol</span>
</span><span class='line'>
</span><span class='line'><span class="k">import</span> <span class="nn">java.net.InetSocketAddress</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Client</span> <span class="o">{</span><span class="err">  </span>
</span><span class='line'>
</span><span class='line'>  <span class="k">val</span> <span class="n">service</span> <span class="k">=</span> <span class="nc">ClientBuilder</span><span class="o">().</span><span class="n">hosts</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="n">newInetSocketAddress</span><span class="o">(</span><span class="s">&quot;localhost&quot;</span><span class="o">,</span><span class="mi">9999</span><span class="o">)))</span>
</span><span class='line'>    <span class="o">.</span><span class="n">codec</span><span class="o">(</span><span class="nc">ThriftClientFramedCodec</span><span class="o">())</span><span class="err">    </span>
</span><span class='line'>    <span class="o">.</span><span class="n">hostConnectionLimit</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span><span class="err">    </span>
</span><span class='line'>    <span class="o">.</span><span class="n">build</span><span class="o">()</span><span class="err">  </span>
</span><span class='line'>  <span class="k">val</span> <span class="n">client</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">NewbirdServiceClientAdapter</span><span class="o">(</span>
</span><span class='line'>    <span class="k">new</span> <span class="n">thrift</span><span class="o">.</span><span class="nc">NewbirdService</span><span class="o">.</span><span class="nc">ServiceToClient</span><span class="o">(</span><span class="n">service</span><span class="o">,</span><span class="n">newTBinaryProtocol</span><span class="o">.</span><span class="nc">Factory</span><span class="o">))</span><span class="err">  </span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="n">key</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="n">key</span><span class="o">)()</span><span class="err">  </span>
</span><span class='line'>  <span class="k">def</span> <span class="n">put</span><span class="o">(</span><span class="n">key</span><span class="k">:</span><span class="kt">String</span><span class="o">,</span> <span class="n">value</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="n">client</span><span class="o">.</span><span class="n">put</span><span class="o">(</span><span class="n">key</span><span class="o">,</span><span class="n">value</span><span class="o">)()</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Running the server</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>newbird
</span><span class='line'><span class="nv">$ </span>sbt&gt; run -f config/development.scala
</span></code></pre></td></tr></table></div></figure>


<h3>Playing with the client**</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>newbird
</span><span class='line'><span class="nv">$ </span>sbt console
</span><span class='line'>scala&gt; import com.twitter.newbird.Client
</span><span class='line'>scala&gt; val <span class="nv">client</span> <span class="o">=</span> new Client<span class="o">()</span>
</span><span class='line'>scala&gt; client.put<span class="o">(</span><span class="s2">&quot;foo&quot;</span>,<span class="s2">&quot;bar&quot;</span><span class="o">)</span>
</span><span class='line'>scala&gt; client.get<span class="o">(</span><span class="s2">&quot;foo&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Bonus</h3>

<p>finagle exports a stats url you can curl:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>curl http://localhost:9900/stats.txt
</span><span class='line'>counters:  Newbird/connects: 1  
</span><span class='line'>Newbird/requests: 4  
</span><span class='line'>Newbird/success: 4
</span><span class='line'>gauges:  
</span><span class='line'>  Newbird/connections: 0  
</span><span class='line'>  Newbird/pending: 0  
</span><span class='line'>  jvm_heap_committed: 588251136  
</span><span class='line'>  jvm_heap_max: 2146828288  
</span><span class='line'>  jvm_heap_used: 64354560  
</span><span class='line'>  jvm_nonheap_committed: 83267584  
</span><span class='line'>  jvm_nonheap_max: 318767104  
</span><span class='line'>  jvm_nonheap_used: 68655360  
</span><span class='line'>  jvm_num_cpus: 4  
</span><span class='line'>  jvm_start_time: 1327511164928  
</span><span class='line'>  jvm_thread_count: 14  
</span><span class='line'>  jvm_thread_daemon_count: 9  
</span><span class='line'>  jvm_thread_peak_count: 14  
</span><span class='line'>  jvm_uptime: 2626505
</span><span class='line'>labels:
</span><span class='line'>  metrics:  
</span><span class='line'>    Newbird/connection_duration: <span class="o">(</span><span class="nv">average</span><span class="o">=</span>2590412, <span class="nv">count</span><span class="o">=</span>1, <span class="nv">maximum</span><span class="o">=</span>2590412, <span class="nv">minimum</span><span class="o">=</span>2590412, <span class="nv">p25</span><span class="o">=</span>2590412, <span class="nv">p50</span><span class="o">=</span>2590412, <span class="nv">p75</span><span class="o">=</span>2590412, <span class="nv">p90</span><span class="o">=</span>2590412, <span class="nv">p99</span><span class="o">=</span>2590412, <span class="nv">p999</span><span class="o">=</span>2590412, <span class="nv">p9999</span><span class="o">=</span>2590412<span class="o">)</span>  
</span><span class='line'>    Newbird/connection_received_bytes: <span class="o">(</span><span class="nv">average</span><span class="o">=</span>192, <span class="nv">count</span><span class="o">=</span>1, <span class="nv">maximum</span><span class="o">=</span>192, <span class="nv">minimum</span><span class="o">=</span>192, <span class="nv">p25</span><span class="o">=</span>192, <span class="nv">p50</span><span class="o">=</span>192, <span class="nv">p75</span><span class="o">=</span>192, <span class="nv">p90</span><span class="o">=</span>192, <span class="nv">p99</span><span class="o">=</span>192, <span class="nv">p999</span><span class="o">=</span>192, <span class="nv">p9999</span><span class="o">=</span>192<span class="o">)</span>  
</span><span class='line'>    Newbird/connection_requests: <span class="o">(</span><span class="nv">average</span><span class="o">=</span>4, <span class="nv">count</span><span class="o">=</span>1, <span class="nv">maximum</span><span class="o">=</span>4, <span class="nv">minimum</span><span class="o">=</span>4, <span class="nv">p25</span><span class="o">=</span>4, <span class="nv">p50</span><span class="o">=</span>4, <span class="nv">p75</span><span class="o">=</span>4, <span class="nv">p90</span><span class="o">=</span>4, <span class="nv">p99</span><span class="o">=</span>4, <span class="nv">p999</span><span class="o">=</span>4, <span class="nv">p9999</span><span class="o">=</span>4<span class="o">)</span>  
</span><span class='line'>    Newbird/connection_sent_bytes: <span class="o">(</span><span class="nv">average</span><span class="o">=</span>120, <span class="nv">count</span><span class="o">=</span>1, <span class="nv">maximum</span><span class="o">=</span>120, <span class="nv">minimum</span><span class="o">=</span>120, <span class="nv">p25</span><span class="o">=</span>120, <span class="nv">p50</span><span class="o">=</span>120, <span class="nv">p75</span><span class="o">=</span>120, <span class="nv">p90</span><span class="o">=</span>120, <span class="nv">p99</span><span class="o">=</span>120, <span class="nv">p999</span><span class="o">=</span>120, <span class="nv">p9999</span><span class="o">=</span>120<span class="o">)</span>  
</span><span class='line'>    Newbird/request_latency_ms: <span class="o">(</span><span class="nv">average</span><span class="o">=</span>14, <span class="nv">count</span><span class="o">=</span>4, <span class="nv">maximum</span><span class="o">=</span>39, <span class="nv">minimum</span><span class="o">=</span>2, <span class="nv">p25</span><span class="o">=</span>2, <span class="nv">p50</span><span class="o">=</span>8, <span class="nv">p75</span><span class="o">=</span>10, <span class="nv">p90</span><span class="o">=</span>39, <span class="nv">p99</span><span class="o">=</span>39, <span class="nv">p999</span><span class="o">=</span>39, <span class="nv">p9999</span><span class="o">=</span>39<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p> </p>

<p> </p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-01-25T09:45:00-08:00" pubdate data-updated="true">Jan 25<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/alfred-extension-for-creating-wunderlist-task">Alfred Extension for Creating Wunderlist Tasks</a></h1>
	<div class="entry-content">
		<p>While looking for a way to add wunderlist tasks via alfred, I came upon <a href="http://jdfwarrior.tumblr.com/post/13163220116/wunderlist-for-alfred">wunderlist-for-alfred</a></p>

<p>Looked cool, but I wanted to write my own that didn&#8217;t depend on php.</p>

<p>I used <code>lsof</code> to figure out the location of the db, then used <code>file</code> to see what kind of db it was. Luckily, it was sqlite3, so I was able to poke around and figure out the sql to create a task.</p>

<p>Here&#8217;s the alfred extenstion that ties it all together:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">user</span><span class="o">=</span><span class="sb">`</span>whoami<span class="sb">`</span>
</span><span class='line'><span class="nv">wunderdb</span><span class="o">=</span><span class="s2">&quot;/Users/$user/Library/Wunderlist/wunderlist.db&quot;</span>
</span><span class='line'>sqlite3 <span class="nv">$wunderdb</span> <span class="s2">&quot;insert into tasks (name, list_id) values (&#39;{query}&#39;, 1)&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Download it <a href="http://dl.dropbox.com/u/42561/wunderlist-capotej.alfredextension">here</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-01-09T23:36:00-08:00" pubdate data-updated="true">Jan 9<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/render-image-links-directly-inside-adium">Render Image Links Directly Inside Adium</a></h1>
	<div class="entry-content">
		<p>Last night I delightfully discovered that Adium Message Styles are just html, css, and javascript rendered inside a webview. The next natural step was to write something in it, so I wrote a Message Style that tries to render any image link directly inline the conversation (campfire style).</p>

<p><img src="/images/blog/adium1.png" alt="" /></p>

<p>The code was written at midnight after a long day, so its not best. Basically, it&#8217;s a setInterval that runs every 2.5 seconds that loops through all message elements, appending an img tag to the body of the message if an image link is detected. It also removes the processing class as to not reprocess the same messages.</p>

<p>Installation is simple, just download: </p>

<p><a href="http://dl.dropbox.com/u/42561/Stockholm.AdiumMessageStyle.zip">http://dl.dropbox.com/u/42561/Stockholm.AdiumMessageStyle.zip</a></p>

<p>and extract into ~/Library/Adium 2.0/Message Styles (create if necessary). Then choose the TOP Stockholm theme (no idea why there are two entries), and close your chat window. It should be activated next time a chat window opens.</p>

<p><img src="/images/blog/adium2.png" alt="" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-09-13T08:59:00-07:00" pubdate data-updated="true">Sep 13<span>th</span>, 2011</time></div>
	<div class="tags">

</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/dont-pee-in-the-pool">Don&#8217;t Pee in the Pool</a></h1>
	<div class="entry-content">
		<p>A rich man builds a pool containing only bottled water and invites a few friends over. He gathers everyone around and says, &#8220;Guys, I know it&#8217;s tempting and convenient to pee in the pool, but this pool is 100% Evian, let&#8217;s all try to use the bathroom next to the pool instead.&#8221; So everyone listens and enjoys a urine-free, delicious pool for the rest of the day. Until, of course, one of them breaks the rule, ruining it for everyone.</p>

<p>That pool is your commit history and the merge commits are the pee in the pool. So please, keep your pee out of the pool and rebase instead.</p>

<p>Disclaimer: I don&#8217;t really care if you do or do not pee in regular pools. This is all made up to illustrate a point.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-08-18T20:14:00-07:00" pubdate data-updated="true">Aug 18<span>th</span>, 2011</time></div>
	<div class="tags">

</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/sane-lion-gestures">Sane Lion Gestures</a></h1>
	<div class="entry-content">
		<p>Here&#8217;s how you disable lion&#8217;s dumb default gestures that break front/back on browsing and next/prev in emacs:</p>

<p><img src="/images/blog/sane1.png" alt="" />
<img src="/images/blog/sane2.png" alt="" />
<img src="/images/blog/sane3.png" alt="" /></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-07-25T13:37:00-07:00" pubdate data-updated="true">Jul 25<span>th</span>, 2011</time></div>
	<div class="tags">

</div>
	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2012

    Julio Capote

</footer>
	<script src="/javascripts/slash.js"></script>


<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '5071b3b1613f5d6a9500003c');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>


</body>
</html>